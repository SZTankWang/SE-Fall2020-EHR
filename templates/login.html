<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>welcome to WeCare</title>
	<link rel="stylesheet" href="/static/WC_index.css">

</head>
<body>
	<div id="login-bg">
	</div>
	<div id="login-form-container">
		<p id='login-title'>WeCare</p>
		<div id="login-field">
			<div id="login-form-mode-bar">
				<div class="mode" id="go-login" onclick="goLogin()">login</div>
				<div class="mode" id="go-register" onclick="goRegister()">register</div>

			</div>
				<form action="" class='form' id="login-form">
				<div class="login-input" id='input-name' >
					<label for="username">User</label>
					<input type="text" id="login-username">
				</div>
				<div class="login-input" id='login-input-pass'>
					<label for="password">Password</label>
					<input type="text" id="password">

				</div>
			</form>
			<div id="login-btn-wrapper">
				<button type="button" class="primary-btn" id='doLogin'>Login</button>
			</div>

			<div id="option-container">
				<div class="login-option" id='forget-password'>
					forget password
				</div>
				<div class="login-option" id='forget-username'>
					forget username
				</div>
			</div>

			</div>
		</div>


	<script src="https://code.jquery.com/jquery-3.5.1.slim.js" integrity="sha256-DrT5NfxfbHvMHux31Lkhxg42LY6of8TaYyK50jnxRnM=" crossorigin="anonymous"></script>
	<script type="module" src="/static/login.js"></script>
	<script type="text/javascript">
		//登录页头登录/注册切换按钮
		renderFormType();

		function renderFormType(){
			var type=$('.form').attr('id');
			if(type=='login-form'){
				$('#go-login').css({'background':'#2D79D6','color':'white' 	});
			}
			else{
				$('#go-register').css({'background':'#2D79D6','color':'white'});
			}
			
		}

		function clickDoctor(){
			console.log('捕获');
			$('#choice-view-container').remove();
			renderRegister('doctor');
		}

		function clickNurse(){
			console.log('护士');
			$('#choice-view-container').remove();
			renderRegister('nurse');

		}

		function clickPatient(){
			console.log('病人');
			$('#choice-view-container').remove();
			renderRegister('patient');
		}

		function goRegister(){
		// console.log('点击注册');
			if($('.form').attr('id')=='login-form'){
				console.log('切换至注册');
				document.getElementById('go-login').style.background="white";
				document.getElementById('go-login').style.color="#BCC3CA";
				document.getElementById('go-register').style.background="#2D79D6";
				document.getElementById('go-register').style.color="white";
				//用户选择注册角色
				//先清空表单
				clearLoginForm();	
				$('#login-field').append(renderChoice());
			}
		}

		function goLogin(){
			if($('.form').attr('id')!='login-form'){
				console.log('切换至登录');
				document.getElementById('go-login').style.background="#2D79D6";
				document.getElementById('go-login').style.color="white";
				document.getElementById('go-register').style.background="white";
				document.getElementById('go-register').style.color="#BCC3CA";
				if($('#choice-view-container')){
					$('#choice-view-container').remove();
				}
				clearRegisterForm();
				// $('.form').empty();
				// $('.form').attr('id','')
				$('#login-field').append(concatLogin());

			}

		}

		function clearRegisterForm(){
			$('.form').remove();
			$('.register-btn-wrapper').remove();

		}
		//清空表单和忘记密码
		function clearLoginForm(){
			$('.form').remove();
			$('#login-btn-wrapper').remove();
			$('#option-container').remove();
		}

		//替换成选择角色
		function renderChoice(){
			var temp="";
			temp+= "<!-- 按钮部分 --><div id='choice-view-container'><div id='choice-header-wrapper'><div id='choice-header'>Register as:</div><span></span></div><div id='choice-btn-outer-container'><div class='choice-btn-container' id='doctor' onclick='clickDoctor()'><div class='choice-background' id='doctor-background'></div><div class='choice-description'>Doctor</div></div><div class='choice-btn-container' id='staff' onclick='clickNurse()'><div class='choice-background' id='staff-background'></div><div class='choice-description'>Staff</div></div><div class='choice-btn-container' id='patient' onclick='clickPatient()'><div class='choice-background' id='patient-background'></div><div class='choice-description'>Patient</div></div></div></div>";
			return temp;
		}

		function renderRegister(role){
			$('#login-field').append(concatRegister(role));

		}

		function concatRegister(role){
			var temp = '';
			if(role=='patient'){
				temp+='<form action="" class="form" id="patient-register-form"><div class="register-input" ><label for="legalName">Legal Name</label><input type="text" id="legalName"></div><div class="register-input"><label for="ID">ID</label><input type="text" id="ID"></div><div class="register-input"><label for="phone">Phone</label><input type="text" id="phone"></div><div class="register-input"><label for="Email">Email</label><input type="text" id="Email"></div><div class="register-input"><label for="username">Username</label><input type="text" id="username"></div><div class="register-input"><label for="password">Password</label><input type="text" id="password"></div></form><div class="register-btn-wrapper"id="patient-register-btn-wrapper"><button type="button" class="primary-btn" id="doRegister">Register</button></div>';
			}
			if(role=='doctor'){
				temp+='<form action="" class="form" id="doctor-register-form"><div class="register-input" ><label for="legalName">Legal Name</label><input type="text" id="legalName"></div><div class="register-input"><label for="LicenseID">License ID</label><input type="text" id="ID"></div><div class="register-input"><label for="phone">Phone</label><input type="text" id="phone"></div><div class="register-input"><label for="Email">Email</label><input type="text" id="Email"></div><div class="register-input"><label for="username">Username</label><input type="text" id="username"></div><div class="register-input"><label for="password">Password</label><input type="text" id="password"></div></form><div class="register-btn-wrapper"id="patient-register-btn-wrapper"><button type="button" class="primary-btn" id="doRegister">Register</button></div>';
			}
			if(role=='nurse'){
				temp+='<form action="" class="form" id="nurse-register-form"><div class="register-input" ><label for="legalName">Legal Name</label><input type="text" id="legalName"></div><div class="register-input"><label for="LicenseID">License ID</label><input type="text" id="ID"></div><div class="register-input"><label for="phone">Phone</label><input type="text" id="phone"></div><div class="register-input"><label for="Email">Email</label><input type="text" id="Email"></div><div class="register-input"><label for="username">Username</label><input type="text" id="username"></div><div class="register-input"><label for="password">Password</label><input type="text" id="password"></div></form><div class="register-btn-wrapper"id="patient-register-btn-wrapper"><button type="button" class="primary-btn" id="doRegister">Register</button></div>'
			}
			

			return temp;
			}
			
		function concatLogin(){
			var temp='';
			temp += '<form action="" class="form" id="login-form"><div class="login-input" id="input-name" ><label for="username">User</label><input type="text" id="login-username"></div><div class="login-input" id="login-input-pass"><label for="password">Password</label><input type="text" id="password"></div></form>';
			temp+= '<div id="login-btn-wrapper"><button type="button" class="primary-btn" id="doLogin">Login</button></div>';			

			temp+='<div id="option-container"><div class="login-option" id="forget-password">forget password</div><div class="login-option" id="forget-username">forget username</div></div>';

			return temp;
		}
</script>
</body>
</html>

